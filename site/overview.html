<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>overview - ABI Framework Documentation</title>
  <meta name="description" content="">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/abi/assets/css/style.css">
</head>
<body>
<nav class="navbar">
  <div class="nav-container">
    <a href="/abi/" class="nav-logo">
      <span class="logo-text">ABI</span>
      <span class="logo-version">v0.16.0</span>
    </a>
    <div class="nav-links">
      <a href="/abi/">Home</a>
      <a href="/abi/intro.html">Docs</a>
      <a href="https://github.com/donaldfilimon/abi" target="_blank">GitHub</a>
    </div>
    <button class="theme-toggle" onclick="toggleTheme()"><span class="theme-icon">ğŸŒ™</span></button>
  </div>
</nav>
<div class="main-container">
  <main class="content" style="margin-left: 0;">
    <article class="doc-article">
      <header class="doc-header">
        <h1>overview</h1>
      </header>
      <nav class="toc"><h3>On this page</h3><ul>
        <li style="padding-left: 0px"><a href="#abi-framework-architecture-overview">ABI Framework Architecture Overview</a></li>
        <li style="padding-left: 16px"><a href="#directory-structure">Directory Structure</a></li>
        <li style="padding-left: 16px"><a href="#design-patterns">Design Patterns</a></li>
        <li style="padding-left: 32px"><a href="#1-feature-gating-pattern">1. Feature Gating Pattern</a></li>
        <li style="padding-left: 32px"><a href="#2-context-pattern-framework-integration">2. Context Pattern (Framework Integration)</a></li>
        <li style="padding-left: 32px"><a href="#3-wrapper-pattern">3. Wrapper Pattern</a></li>
        <li style="padding-left: 32px"><a href="#4-builder-pattern-framework">4. Builder Pattern (Framework)</a></li>
        <li style="padding-left: 32px"><a href="#5-registry-pattern-feature-management">5. Registry Pattern (Feature Management)</a></li>
        <li style="padding-left: 16px"><a href="#module-responsibilities">Module Responsibilities</a></li>
        <li style="padding-left: 16px"><a href="#import-guidance">Import Guidance</a></li>
        <li style="padding-left: 16px"><a href="#configuration-flow">Configuration Flow</a></li>
        <li style="padding-left: 16px"><a href="#migration-status">Migration Status</a></li>
        <li style="padding-left: 32px"><a href="#complete-202601">Complete (2026.01)</a></li>
        <li style="padding-left: 32px"><a href="#remaining-work">Remaining Work</a></li>
        <li style="padding-left: 16px"><a href="#testing">Testing</a></li>
        <li style="padding-left: 32px"><a href="#test-categories">Test Categories</a></li>
        <li style="padding-left: 16px"><a href="#related-documentation">Related Documentation</a></li>
      </ul></nav>
      <div class="doc-content"><h1 id="abi-framework-architecture-overview">ABI Framework Architecture Overview<a class="anchor" href="#abi-framework-architecture-overview">#</a></h1>
<blockquote><strong>Codebase Status:</strong> Synced with repository as of 2026-01-23.</blockquote>

<p>This document provides a comprehensive overview of the ABI framework architecture after the 2026.01 migration.</p>

<h2 id="directory-structure">Directory Structure<a class="anchor" href="#directory-structure">#</a></h2>

<pre class="code-block"><code>src/
â”œâ”€â”€ abi.zig              # Public API entry point: init(), shutdown(), version()
â”œâ”€â”€ config.zig           # Unified configuration system
â”œâ”€â”€ framework.zig        # Framework orchestration with builder pattern
â”‚
â”œâ”€â”€ runtime/             # Always-on infrastructure (task execution, scheduling)
â”‚   â””â”€â”€ mod.zig         # Runtime Context for Framework integration
â”‚
â”œâ”€â”€ gpu/                 # GPU acceleration [FULLY MIGRATED]
â”‚   â”œâ”€â”€ mod.zig         # Module entry, exports unified API
â”‚   â”œâ”€â”€ unified.zig     # Gpu struct, GpuConfig, high-level ops
â”‚   â”œâ”€â”€ dsl/            # Kernel DSL compiler (builder, codegen, optimizer)
â”‚   â”œâ”€â”€ backends/       # Backend implementations (cuda/, vulkan, metal, etc.)
â”‚   â”œâ”€â”€ diagnostics.zig # GPU state debugging
â”‚   â”œâ”€â”€ error_handling.zig # Structured error context
â”‚   â””â”€â”€ failover.zig    # Graceful degradation to CPU
â”‚
â”œâ”€â”€ database/           # Vector database [FULLY MIGRATED]
â”‚   â”œâ”€â”€ mod.zig        # Module entry with Context struct
â”‚   â”œâ”€â”€ stub.zig       # Feature-gated placeholder
â”‚   â”œâ”€â”€ database.zig   # Core VectorDatabase implementation
â”‚   â”œâ”€â”€ hnsw.zig       # HNSW indexing
â”‚   â”œâ”€â”€ formats/       # File format handlers (8 files)
â”‚   â””â”€â”€ ...            # 24+ implementation files
â”‚
â”œâ”€â”€ network/            # Distributed compute [FULLY MIGRATED]
â”‚   â”œâ”€â”€ mod.zig        # Module entry with Context struct
â”‚   â””â”€â”€ stub.zig       # Feature-gated placeholder
â”‚
â”œâ”€â”€ web/                # Web/HTTP utilities [FULLY MIGRATED]
â”‚   â”œâ”€â”€ mod.zig        # Module entry with Context struct
â”‚   â”œâ”€â”€ stub.zig       # Feature-gated placeholder
â”‚   â”œâ”€â”€ client.zig     # HTTP client implementation
â”‚   â””â”€â”€ weather.zig    # Weather API client
â”‚
â”œâ”€â”€ ai/                 # AI module (thin wrappers)
â”‚   â”œâ”€â”€ mod.zig        # Module entry with Context struct
â”‚   â”œâ”€â”€ agents/        # Agent system wrapper
â”‚   â”œâ”€â”€ embeddings/    # Embeddings wrapper
â”‚   â”œâ”€â”€ llm/           # LLM inference wrapper
â”‚   â””â”€â”€ training/      # Training pipeline wrapper
â”‚
â”œâ”€â”€ observability/      # Metrics, tracing, profiling
â”‚   â”œâ”€â”€ mod.zig        # Module entry with Context struct
â”‚   â””â”€â”€ stub.zig       # Feature-gated placeholder
â”‚
â”œâ”€â”€ shared/             # Cross-cutting utilities
â”‚   â”œâ”€â”€ mod.zig        # Logging, plugins, platform exports
â”‚   â”œâ”€â”€ simd.zig       # SIMD vector operations
â”‚   â”œâ”€â”€ observability/ # Metrics primitives, tracing types (Tracer, Span)
â”‚   â””â”€â”€ utils/         # Memory, time, backoff utilities
â”‚
â”œâ”€â”€ compute/            # Legacy compute infrastructure
â”‚   â”œâ”€â”€ mod.zig        # Concurrency primitives
â”‚   â””â”€â”€ runtime/       # Future, TaskGroup, CancellationToken
â”‚
â”œâ”€â”€ features/           # Implementation layer
â”‚   â”œâ”€â”€ mod.zig        # Feature references
â”‚   â”œâ”€â”€ ai/            # Full AI implementation (agent, training, embeddings, llm)
â”‚   â”œâ”€â”€ connectors/    # API connectors (OpenAI, Ollama, Anthropic)
â”‚   â””â”€â”€ ha/            # High availability (backup, PITR, replication)
â”‚
â””â”€â”€ registry/           # Feature registry system [MODULARIZED]
    â”œâ”€â”€ mod.zig        # Public API facade with Registry struct
    â”œâ”€â”€ types.zig      # Core types (Feature, RegistrationMode, Error)
    â”œâ”€â”€ registration.zig # registerComptime, registerRuntimeToggle, registerDynamic
    â””â”€â”€ lifecycle.zig  # initFeature, deinitFeature, enable/disable
</code></pre>

<h2 id="design-patterns">Design Patterns<a class="anchor" href="#design-patterns">#</a></h2>

<h3 id="1-feature-gating-pattern">1. Feature Gating Pattern<a class="anchor" href="#1-feature-gating-pattern">#</a></h3>

<p>Compile-time feature selection via <code>build_options.enable_*</code>. Disabled features use stub modules:</p>

<pre class="code-block language-zig"><code>const impl = if (build_options.enable_feature)
    @import(&quot;real.zig&quot;)
else
    @import(&quot;stub.zig&quot;);
</code></pre>

<p><strong>Stub Requirements:</strong></p>
<li>Must mirror complete API (structs, functions, constants)</li>
<li>Always return <code>error.&lt;Feature&gt;Disabled</code> for operations</li>
<li>Include Context struct matching real module</li>
<li>Include <code>isEnabled()</code> function returning <code>false</code></li>

<p><strong>Stub Parity Testing:</strong></p>
<p>Automated parity verification in <code>src/tests/stub_parity.zig</code> ensures stubs stay synchronized:</p>
<pre class="code-block language-zig"><code>// Verify all feature modules follow Context + isEnabled pattern
fn verifyContextPattern(comptime Module: type) !void {
    try testing.expect(@hasDecl(Module, &quot;Context&quot;));
    try testing.expect(@hasDecl(Module, &quot;isEnabled&quot;));
}
</code></pre>

<h3 id="2-context-pattern-framework-integration">2. Context Pattern (Framework Integration)<a class="anchor" href="#2-context-pattern-framework-integration">#</a></h3>

<p>Every feature module exposes a <code>Context</code> struct for Framework integration:</p>

<pre class="code-block language-zig"><code>pub const Context = struct {
    allocator: Allocator,
    // feature-specific state...

    pub fn init(allocator: Allocator, config: ?Config) !Context {
        // Initialize feature
    }

    pub fn deinit(self: *Context) void {
        // Cleanup
    }
};
</code></pre>

<h3 id="3-wrapper-pattern">3. Wrapper Pattern<a class="anchor" href="#3-wrapper-pattern">#</a></h3>

<p>Thin wrapper modules in <code>src/</code> delegate to implementations in <code>src/features/</code>:</p>

<pre class="code-block language-zig"><code>// src/ai/mod.zig (wrapper)
const impl = @import(&quot;../features/ai/mod.zig&quot;);
pub const Agent = impl.Agent;
</code></pre>

<p>This pattern allows gradual migration while maintaining stable imports.</p>

<h3 id="4-builder-pattern-framework">4. Builder Pattern (Framework)<a class="anchor" href="#4-builder-pattern-framework">#</a></h3>

<p>Fluent API for framework configuration:</p>

<pre class="code-block language-zig"><code>var fw = try abi.Framework.builder(allocator)
    .withGpu(.{ .backend = .vulkan })
    .withDatabase(.{ .path = &quot;./data&quot; })
    .build();
</code></pre>

<h3 id="5-registry-pattern-feature-management">5. Registry Pattern (Feature Management)<a class="anchor" href="#5-registry-pattern-feature-management">#</a></h3>

<p>Three registration modes for different use cases:</p>

<pre class="code-block language-zig"><code>const registry = @import(&quot;registry/mod.zig&quot;);

var reg = registry.Registry.init(allocator);
defer reg.deinit();

// Comptime-only: Zero overhead, resolved at compile time
try reg.registerComptime(.gpu);

// Runtime-toggle: Compiled in but can be enabled/disabled
try reg.registerRuntimeToggle(.ai, ai_mod.Context, &amp;ai_config);
try reg.enableFeature(.ai);
try reg.initFeature(.ai);

// Query features
if (reg.isEnabled(.gpu)) {
    // Use GPU...
}
</code></pre>

<tr><td>Mode</td><td>Overhead</td><td>Runtime Toggle</td><td>Use Case</td></tr>
<tr><td><code>comptime_only</code></td><td>Zero</td><td>No</td><td>Static features</td></tr>
<tr><td><code>runtime_toggle</code></td><td>Minimal</td><td>Yes</td><td>Optional features</td></tr>
<tr><td><code>dynamic</code></td><td>Moderate</td><td>Yes</td><td>Plugin loading (future)</td></tr>

<h2 id="module-responsibilities">Module Responsibilities<a class="anchor" href="#module-responsibilities">#</a></h2>

<tr><td>Module</td><td>Responsibility</td><td>Status</td></tr>
<tr><td><code>runtime</code></td><td>Task execution, scheduling</td><td>Migrated</td></tr>
<tr><td><code>gpu</code></td><td>GPU acceleration, kernel DSL</td><td>Migrated</td></tr>
<tr><td><code>database</code></td><td>Vector storage, HNSW indexing</td><td>Migrated</td></tr>
<tr><td><code>network</code></td><td>Distributed compute, RPC</td><td>Migrated</td></tr>
<tr><td><code>web</code></td><td>HTTP client, weather API</td><td>Migrated</td></tr>
<tr><td><code>ai</code></td><td>LLM, agents, training</td><td>Wrapper (impl in features/)</td></tr>
<tr><td><code>observability</code></td><td>Metrics, tracing</td><td>Migrated</td></tr>
<tr><td><code>compute</code></td><td>Concurrency primitives</td><td>Legacy</td></tr>

<h2 id="import-guidance">Import Guidance<a class="anchor" href="#import-guidance">#</a></h2>

<p><strong>For application code:</strong></p>
<pre class="code-block language-zig"><code>const abi = @import(&quot;abi&quot;);
var fw = try abi.init(allocator);
</code></pre>

<p><strong>For internal module access:</strong></p>
<pre class="code-block language-zig"><code>// GPU (fully migrated)
const gpu = @import(&quot;src/gpu/mod.zig&quot;);

// Database (fully migrated)
const database = @import(&quot;src/database/mod.zig&quot;);

// Network (fully migrated)
const network = @import(&quot;src/network/mod.zig&quot;);

// Web (fully migrated)
const web = @import(&quot;src/web/mod.zig&quot;);

// AI (use wrapper, impl in features/)
const ai = @import(&quot;src/ai/mod.zig&quot;);
</code></pre>

<h2 id="configuration-flow">Configuration Flow<a class="anchor" href="#configuration-flow">#</a></h2>

<pre class="code-block"><code>User Code
    â†“
abi.init(allocator, config)
    â†“
Framework.init()
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  For each enabled feature:         â”‚
â”‚    1. Check build_options.enable_* â”‚
â”‚    2. Load real or stub module     â”‚
â”‚    3. Call Context.init()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Framework ready for use
</code></pre>

<h2 id="migration-status">Migration Status<a class="anchor" href="#migration-status">#</a></h2>

<h3 id="complete-202601">Complete (2026.01)<a class="anchor" href="#complete-202601">#</a></h3>
<li>GPU module: 74 files in <code>src/gpu/</code></li>
<li>Database module: 32 files in <code>src/database/</code></li>
<li>Web module: 5 files in <code>src/web/</code></li>
<li>Network module: Context struct added</li>
<li>Runtime module: Context struct added</li>
<li>Framework orchestration working</li>

<h3 id="remaining-work">Remaining Work<a class="anchor" href="#remaining-work">#</a></h3>
<li>AI module: Full implementation still in <code>src/features/ai/</code></li>
<li>Compute module: Legacy code, may be consolidated</li>

<h2 id="testing">Testing<a class="anchor" href="#testing">#</a></h2>

<pre class="code-block language-bash"><code># Default build (all features)
zig build

# Feature-disabled build (tests stubs)
zig build -Denable-ai=false -Denable-gpu=false -Denable-database=false \
          -Denable-network=false -Denable-web=false

# Run all tests (includes stub parity verification)
zig build test --summary all

# Build all examples
zig build examples
</code></pre>

<h3 id="test-categories">Test Categories<a class="anchor" href="#test-categories">#</a></h3>

<tr><td>Category</td><td>File</td><td>Description</td></tr>
<tr><td>Framework</td><td><code>src/tests/mod.zig</code></td><td>Framework init, feature flags</td></tr>
<tr><td>Stub Parity</td><td><code>src/tests/stub_parity.zig</code></td><td>Verify stub/real API match</td></tr>
<tr><td>Registry</td><td><code>src/registry/mod.zig</code></td><td>Registration and lifecycle tests</td></tr>
<tr><td>Integration</td><td><code>src/tests/test_matrix.zig</code></td><td>Cross-module integration</td></tr>

<h2 id="related-documentation">Related Documentation<a class="anchor" href="#related-documentation">#</a></h2>

<li><a href="../framework.md">Framework Guide</a> - Detailed framework usage</li>
<li><a href="../feature-flags.md">Feature Flags</a> - Build configuration</li>
<li><a href="../gpu.md">GPU Guide</a> - GPU programming</li>
<li><a href="../database.md">Database Guide</a> - Vector database operations</li>
<li><a href="../troubleshooting.md">Troubleshooting</a> - Common issues</li>

</div>
    </article>
  </main>
</div>
<footer class="footer" style="margin-left: 0;">
  <div class="footer-content">
    <div class="footer-section">
      <h4>ABI Framework</h4>
      <p>Modern Zig framework for AI services and high-performance systems.</p>
    </div>
  </div>
  <div class="footer-bottom"><p>&copy; 2026 ABI Framework. Built with Zig.</p></div>
</footer>
<script src="/abi/assets/js/main.js"></script>
</body>
</html>
